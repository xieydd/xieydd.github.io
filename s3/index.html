<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>S3 | Xieydd&#39;s Blog</title>
  <meta name="description" content="AI Infra Engineer&#39;s Blog">
  
  
  <meta property="og:title" content="S3">
  <meta property="og:description" content="AI Infra Engineer&#39;s Blog">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://blog.xieydd.top/s3/">
  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="S3">
  <meta name="twitter:description" content="AI Infra Engineer&#39;s Blog">
  
  
  <link rel="icon" href="/favicon-32x32.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
  
  
  <style>
    @font-face {
      font-family: 'Monaco';
      src: local('Monaco'), local('Menlo'), local('Consolas');
      font-display: swap;
    }
  </style>
  
  
</head>
<body class="antialiased">
  <div class="container">
    <header class="site-header">
      <div class="language-switcher">
  
  
    
      <span class="lang-current">中文</span>
    
  
    
      
      
      
        
          <a href="/en/" class="lang-link">EN</a>
        
      
    
  
</div>

    </header>
    <main class="content">
      
<article class="post">
  <header class="post-header">
    <h1 class="post-title">S3</h1>
    <div class="post-meta">
      <time datetime="2024-09-13">2024-09-13</time>
      
      <span class="post-author">by xieydd</span>
      
      
      <span class="reading-time">1 min read</span>
      
    </div>
    
    <div class="post-tags">
      
      <a href="https://blog.xieydd.top/tags/cloud" class="tag">#Cloud</a>
      
      <a href="https://blog.xieydd.top/tags/aws" class="tag">#AWS</a>
      
      <a href="https://blog.xieydd.top/tags/s3" class="tag">#S3</a>
      
      <a href="https://blog.xieydd.top/tags/storage" class="tag">#Storage</a>
      
      <a href="https://blog.xieydd.top/tags/system-design" class="tag">#System Design</a>
      
    </div>
    
  </header>

  
  <nav class="toc">
    <h2>目录</h2>
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ap-场景下-s3-的最佳实践">AP 场景下 S3 的最佳实践</a></li>
        <li><a href="#s3-express-one-zone">S3 Express One Zone</a></li>
        <li><a href="#如何利用好-s3-express-one-zone">如何利用好 S3 Express One Zone</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </nav>
  

  <div class="post-content">
    <h1 id="all-you-need-know-about-s3">All you need know about S3</h1>
<h3 id="ap-场景下-s3-的最佳实践">AP 场景下 S3 的最佳实践</h3>
<p>来源<a href="https://www.vldb.org/pvldb/vol16/p2769-durner.pdf">论文</a>
Key Points:</p>
<ul>
<li>price and durability tradeoff: Cloud object storage provides the best durability
guarantees while being the cheapest storage option</li>
<li>latency: first byte latency 与 total latency 看取舍，1MB 以下对象，两者基本一致，对象越大，两者差距越大</li>
<li>throughput: medium in 80 ~ 90 Gbit/s</li>
<li>最佳请求大小：OLAP 中 8~16MiB 最佳 <code>requests=throughput*(baseLatency+size*dataLatency)/size</code></li>
<li>对于 S3，饱和 100 Gibt/s 实例的最佳请求并发度为 ∼200–250, base latency 30 ms, data latency 20 ms/MiB</li>
</ul>
<h3 id="s3-express-one-zone">S3 Express One Zone</h3>
<h3 id="如何利用好-s3-express-one-zone">如何利用好 S3 Express One Zone</h3>
<p>结合<a href="https://news.ycombinator.com/item?id=38449827">HackNews</a>，<a href="https://optiowl.cloud/blog/ultimate-guide-to-s3-express-one-zone-costs">博客</a> 以及文章<a href="https://www.warpstream.com/blog/s3-express-is-all-you-need">S3 Express is All You Need</a>， 我们得出以下结论：</p>
<ol>
<li>S3 Express One Zone 比 S3 Standard 的存储价格高7倍，不适合数据湖场景下的“主存储”。</li>
<li>对于 512KiB 的对象进行 PUT， GET 操作是最省成本的</li>
<li>超过 50MB 的 512KB 块存储文件没有成本优势，因为延迟达到 S3 Standard 且价格无优势</li>
<li>One Zone 意味着如果希望数据可以跨 zone 高可用，需要跨 zone 复制，传输有一定的成本</li>
<li>Express 也不适合压缩层，因为压缩前对象大概率不会是 512KB 以下</li>
<li>作为 Standard 上的缓存层，当对象小于 645KB 是有性能收益的，但是如果超过那你就需要考虑成本和性能的权衡了</li>
<li>完全可以作为像 dynamodb 这类 key value NOSql 数据库的缓存层</li>
<li>不支持 s3 lifecycle policy</li>
<li>20ms 的延迟，可以作为 replication layer</li>
</ol>

  </div>

  <footer class="post-footer">
    <div class="post-nav">
      
      <a href="https://blog.xieydd.top/serverless/" class="prev-post">&larr; Serverless Database</a>
      
      
      <a href="https://blog.xieydd.top/improve-model-serving-cold-start/" class="next-post">优化模型推理的冷启动 &rarr;</a>
      
    </div>
    
    <a href="https://blog.xieydd.top/" class="back-home">&larr; 返回首页</a>
  </footer>
</article>

    </main>
  </div>
</body>
</html>
