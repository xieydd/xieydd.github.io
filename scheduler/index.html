<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>调度系统 | Xieydd&#39;s Blog</title>
  <meta name="description" content="AI Infra Engineer&#39;s Blog">
  
  
  <meta property="og:title" content="调度系统">
  <meta property="og:description" content="AI Infra Engineer&#39;s Blog">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://blog.xieydd.top/scheduler/">
  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="调度系统">
  <meta name="twitter:description" content="AI Infra Engineer&#39;s Blog">
  
  <link rel="icon" href="/favicon-32x32.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  <link rel="canonical" href="https://blog.xieydd.top/scheduler/">
  
  
  <link rel="alternate" hreflang="zh-cn" href="https://blog.xieydd.top/scheduler/">
  

  <link rel="stylesheet" href="/css/style.css">
  
  
  <meta name="view-transition" content="same-origin">
  
  
  <style>
    @font-face {
      font-family: 'Monaco';
      src: local('Monaco'), local('Menlo'), local('Consolas');
      font-display: swap;
    }
  </style>
  
  
</head>
<body class="antialiased">
  <div class="container">
    <header class="top-nav">
      <a href="https://blog.xieydd.top/" class="site-name">xieydd</a>
      <nav class="nav-links">
        
        <a href="https://blog.xieydd.top/posts/">文章</a>
        <a href="https://blog.xieydd.top/about/">关于</a>
        
        <div class="nav-icons">
          <button id="theme-toggle" class="theme-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">
            <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
          </button>
          <div class="language-switcher">
  
  
    
  
    
      
      
      
      
      
        
           <a href="/en/" class="lang-link">EN</a>
        
      
    
  
</div>
        </div>
      </nav>
    </header>
    <div class="nav-divider"></div>
    <main class="content swup-transition-main" id="swup">
      
<div class="reading-progress" id="reading-progress"></div>
<article class="post">
  <header class="post-header">
    <h1 class="post-title" style="view-transition-name: index.zh-cn">调度系统</h1>
    <div class="post-meta">
      <span>发布于 2 Feb, 2023</span>
      <span>• 2 min read</span>
    </div>
  </header>

  
  <nav class="toc">
    <h2>目录</h2>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#调度的目的什么是调度系统">调度的目的(什么是调度系统)</a></li>
    <li><a href="#调度器分类以及常见调度器">调度器分类以及常见调度器</a>
      <ul>
        <li><a href="#单体式调度器">单体式调度器</a></li>
        <li><a href="#两层调度器">两层调度器</a></li>
        <li><a href="#状态共享调度器">状态共享调度器</a></li>
      </ul>
    </li>
    <li><a href="#工作中使用的调度器">工作中使用的调度器</a></li>
    <li><a href="#一些思考">一些思考🤔</a></li>
  </ul>
</nav>
  </nav>
  

  <div class="post-content">
    <p>最近在进行晋级答辩(已失败 :&lt;)，主题还是去年做了一些调度方面的工作，借此机会对调度系统进行一些高维度的思考，在此记录下，如有不足之处，还望看官大人指出。</p>
<h2 id="调度的目的什么是调度系统">调度的目的(什么是调度系统)</h2>
<p>调度的目的其实是在满足资源需求的前提下，提升资源利用率、稳定性、以及性能（吞吐、延迟）等。不同层次都有调度的问题需要解决，微架构下的指令调度，OS 层面的线程调度，集群层面的任务调度等。
例如 PL(编程语言)中的内存管理系统其实也是个调度系统，C 需要手动的 malloc 申请内存，free 释放内存，手动分配带来了很多问题。比如内存分配到栈还是堆，什么时候需要释放，悬挂指针、内存泄漏等问题。为了更加有效的管理内存分配，现代编程语言都垃圾回收期以及内存分类器来自动的管理内存，比如 rust 通过 borrow checker、ownership、borrow 来管理并确保跨堆栈和堆的内存管理。</p>
<h2 id="调度器分类以及常见调度器">调度器分类以及常见调度器</h2>
<p>按照调度时机可以分为首次调度和运行时调度（也叫重调度），我们见到的大部分调度器都是首次调度。
针对调度器的架构，可分为单体(Monolithic)调度器、两层调度器、状态共享调度器这三类。</p>
<figure>
    <img src="scheduler-architect-items.png"/> <figcaption>
            <h4>调度器分类 (figure 1)</h4>
        </figcaption>
</figure>

<h3 id="单体式调度器">单体式调度器</h3>
<p>首先单体式调度器的资源请求、任务调度、任务状态、资源状态都是通过该实例进行管理和同步的。OS 进程、线程调度，Hadoop YARN 调度器以及 Kubernetes 原生调度器都属于此类调度器。</p>
<h3 id="两层调度器">两层调度器</h3>
<h3 id="状态共享调度器">状态共享调度器</h3>
<h2 id="工作中使用的调度器">工作中使用的调度器</h2>
<h2 id="一些思考">一些思考🤔</h2>

  </div>

  <footer class="post-footer">
    <div class="post-footer-divider"></div>

    
    <div class="post-tags">
      
      <a href="https://blog.xieydd.top/tags/scheduler" class="tag">#scheduler</a>
      
      <a href="https://blog.xieydd.top/tags/kubernetes" class="tag">#kubernetes</a>
      
    </div>
    

    <div class="share-section">
      <span class="share-label">分享到:</span>
      <div class="share-buttons">
        <a href="https://x.com/intent/post?url=https%3a%2f%2fblog.xieydd.top%2fscheduler%2f" target="_blank" rel="noopener noreferrer" class="share-btn" title="Share on X">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4l11.733 16h4.267l-11.733 -16z" />
            <path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" />
          </svg>
        </a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fblog.xieydd.top%2fscheduler%2f" target="_blank" rel="noopener noreferrer" class="share-btn" title="Share on LinkedIn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 11v5" />
            <path d="M8 8v.01" />
            <path d="M12 16v-5" />
            <path d="M16 16v-3a2 2 0 1 0 -4 0" />
            <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
          </svg>
        </a>
        <a href="mailto:?subject=%e8%b0%83%e5%ba%a6%e7%b3%bb%e7%bb%9f&body=https%3a%2f%2fblog.xieydd.top%2fscheduler%2f" class="share-btn" title="Share via Email">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
            <path d="M3 7l9 6l9 -6" />
          </svg>
        </a>
      </div>
    </div>

    <a href="#" class="back-to-top">返回顶部</a>

    <div class="post-footer-divider"></div>

    <div class="post-nav">
      
      <a href="https://blog.xieydd.top/kubernetes-topo-aware-all-you-need-know/" class="prev-post">
        <span class="nav-label">上一篇</span>
        <span class="nav-title">关于 Kubernetes 中，拓扑感知你需要知道的一切</span>
      </a>
      
      
      <a href="https://blog.xieydd.top/postgres-ha/" class="next-post">
        <span class="nav-label">下一篇</span>
        <span class="nav-title">Postgres 高可用</span>
      </a>
      
    </div>
  </footer>
</article>

    </main>
  </div>
  <script src="https://unpkg.com/swup@4"></script>
  <script>
    (function() {
      function initThemeToggle() {
        var toggle = document.getElementById('theme-toggle');
        var html = document.documentElement;
        var stored = localStorage.getItem('theme');
        if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          html.classList.add('dark');
        }
        if (toggle) {
          toggle.addEventListener('click', function() {
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
          });
        }
      }

      function initReadingProgress() {
        var progress = document.getElementById('reading-progress');
        if (!progress) return;
        function updateProgress() {
          var scrollTop = window.scrollY || document.documentElement.scrollTop;
          var docHeight = document.documentElement.scrollHeight - window.innerHeight;
          var percent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
          progress.style.width = percent + '%';
        }
        window.removeEventListener('scroll', updateProgress);
        window.addEventListener('scroll', updateProgress);
        updateProgress();
      }

      function initBackToTop() {
        var backToTop = document.querySelector('.back-to-top');
        if (backToTop) {
          backToTop.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        }
      }

      initThemeToggle();
      initReadingProgress();
      initBackToTop();

      var swup = new Swup({
        animationSelector: '[class*="swup-transition-"]',
        containers: ['#swup', '.top-nav'],
        cache: true
      });

      swup.hooks.on('content:replace', function() {
        initThemeToggle();
        initReadingProgress();
        initBackToTop();
        window.scrollTo(0, 0);
      });
    })();
  </script>
</body>
</html>
