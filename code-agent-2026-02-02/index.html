<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Coding at Agent-Speed | Xieydd&#39;s Blog</title>
  <meta name="description" content="My journey and thoughts on using Code Agent.">
  
  
  <meta property="og:title" content="Coding at Agent-Speed">
  <meta property="og:description" content="My journey and thoughts on using Code Agent.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://blog.xieydd.top/code-agent-2026-02-02/">
  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Coding at Agent-Speed">
  <meta name="twitter:description" content="My journey and thoughts on using Code Agent.">
  
  <link rel="icon" href="/favicon-32x32.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  <link rel="canonical" href="https://blog.xieydd.top/code-agent-2026-02-02/">
  
  
  <link rel="alternate" hreflang="zh-cn" href="https://blog.xieydd.top/code-agent-2026-02-02/">
  
  <link rel="alternate" hreflang="en" href="https://blog.xieydd.top/en/code-agent-2026-02-02/">
  

  <link rel="stylesheet" href="/css/style.css">
  
  
  <meta name="view-transition" content="same-origin">
  
  
  <style>
    @font-face {
      font-family: 'Monaco';
      src: local('Monaco'), local('Menlo'), local('Consolas');
      font-display: swap;
    }
  </style>
  
  
</head>
<body class="antialiased">
  <div class="container">
    <header class="top-nav">
      <a href="https://blog.xieydd.top/" class="site-name">xieydd</a>
      <nav class="nav-links">
        
        <a href="https://blog.xieydd.top/posts/">文章</a>
        <a href="https://blog.xieydd.top/about/">关于</a>
        
        <div class="nav-icons">
          <button id="theme-toggle" class="theme-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">
            <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
          </button>
          <div class="language-switcher">
  
  
    
  
    
      
      
      
        
          <a href="https://blog.xieydd.top/en/code-agent-2026-02-02/" class="lang-link">EN</a>
          
        
      
      
      
    
  
</div>
        </div>
      </nav>
    </header>
    <div class="nav-divider"></div>
    <main class="content swup-transition-main" id="swup">
      
<div class="reading-progress" id="reading-progress"></div>
<article class="post">
  <header class="post-header">
    <h1 class="post-title" style="view-transition-name: index.zh-cn">Coding at Agent-Speed</h1>
    <div class="post-meta">
      <span>发布于 2 Feb, 2026</span>
      <span>• 4 min read</span>
    </div>
  </header>

  
  <nav class="toc">
    <h2>目录</h2>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#vs-code---cursor---gemini---vs-code---codex---vs-code---claude-code---glm---vs-code">VS Code -> Cursor -> Gemini -> VS Code -> Codex -> VS Code -> Claude Code -> GLM -> VS Code</a></li>
    <li><a href="#how-i-work">How I Work</a></li>
    <li><a href="#tool-selection">Tool Selection</a></li>
    <li><a href="#thoughts">Thoughts</a></li>
    <li><a href="#next-step">Next Step</a></li>
  </ul>
</nav>
  </nav>
  

  <div class="post-content">
    <p>最近我用 Code Agent 高强度地构建了一款安全产品——基于 eBPF + PostgreSQL 的 LLM Security Insight 平台。技术栈很杂：eBPF、React、Go、Docker、Kubernetes、PostgreSQL、DuckDB。React 和 eBPF 我完全是新手，但一个月后项目竟然跑通了。</p>
<h2 id="vs-code---cursor---gemini---vs-code---codex---vs-code---claude-code---glm---vs-code">VS Code -&gt; Cursor -&gt; Gemini -&gt; VS Code -&gt; Codex -&gt; VS Code -&gt; Claude Code -&gt; GLM -&gt; VS Code</h2>
<p>我是个 VS Code 老用户。最早接触的是 VS Code Copilot —— 指定文件、说明改动、生成 Patch。叫 Code Assistant 更准确，就是结对编程。在熟悉的领域用起来确实舒服，代码提示 + 结对编程，编程就应该是这样。</p>
<p>2025 年 3、4 月份接触 Cursor。它的 Agent 模式和多文件编辑让我眼前一亮。当时很多人吐槽：习惯了结对编程，多文件编辑让 Review 时间变长，模型生成的代码也不敢直接 Approve。但 Cursor 敢做第一个吃螃蟹的人。随着 Claude Sonnet 模型的能力提升，Cursor 彻底癫狂。</p>
<p>有意思的是，2025 年初 Cursor 联合创始人 <a href="https://www.sualehasif.me/">Sualeh Asif</a> 给我们团队工程师 <a href="https://blog.mapotofu.org/">keming</a> 发邮件，聊可复现开发环境 infra（<a href="https://github.com/tensorchord/envd">envd</a>）。可见当时 Cursor 已经预见 Agent 大规模落地会遇到一致性问题。他们用向量数据库 + <a href="https://turbopuffer.com/">Turbopuffer</a> 解决多租户场景的代码检索，这思路和我们做 VectorChord 如出一辙。不过 Cursor 免费额度锐减后，我没信用卡续费，就换赛道了。</p>
<p><img src="Xnip2026-02-02_19-57-32.jpg" alt="cursor-email" /></p>
<p>Gemini CLI 来了。Google 的资源和 Infra 确实给力，慷慨的免费 Quota 吸引了大量用户。当时我还在负责 VectorChord Cloud，只能用它修修小 Bug、写写 Test。人肉上下文（Context）工作得很好，但依然没有 Agent 的感觉 —— 还是结对编程。</p>
<p>Quota 用完后我又回到 VS Code。GitHub Copilot 免费订阅 + VS Code Agent 模式 + 支持多厂商模型（OpenAI、Claude、Google），Enterprise Quota 足够我用。但我更习惯多文件编辑，每一行代码还是心里有数。</p>
<p>直到 Claude Code 出现，我才真正体会到 Agent 的感觉。模型能力飞跃带来的代码质量提升 + Plan/Auto/Edit 模式的丝滑切换，让我可以规划、有节奏地实现目标。</p>
<p>不过 Claude 对 Region 限制太厉害，我只有通过特殊途径搞到 Token。后来 GLM 出来后，大家反映代码能力和工具调用能力很强，用上后确实丝滑。</p>
<h2 id="how-i-work">How I Work</h2>
<p>对于文章开头的项目，我基本上是用 Agent 方式完成的：</p>
<p><strong>1. 维护 Project Context</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">~/llm-observability/context/
├── agent-protocol-research.md
├── analyze.sql
├── llm_prompt_injection_analyzer_pg.py
├── pencil-designs/
├── security-product-research.md
└── designs/
    ├── architecture.md
    ├── frontend.md
    ├── mcp.md
    └── ...
</code></pre></td></tr></table>
</div>
</div><p>所有调研、设计、工具代码都丢进这个文件夹。Agent 能直接读取，效率很高。</p>
<p><strong>2. Global Context</strong>
参考 <a href="https://gist.github.com/Xuanwo/fa5162ed3548ae4f962dcc8b8e256bed">Xuanwo 的实践</a>，我的 Global Context 是 <code>agents.md</code> —— 定义了 Agent 的工作方式、约束条件、Best Practices。所有项目共享这份配置。</p>
<p><strong>3. Design First</strong>
和 Agent 一起打磨设计文档，确定技术选型和架构。设计文档就是 Agent 的说明书，写得越清楚，产出越靠谱。</p>
<p><strong>4. Validate Before Build</strong>
先让 Agent 写验证性代码，确认方案可行。之前有个 PostgreSQL Schema 设计，Agent 生成的 DDL 我不确认能否工作，于是先跑 Demo 验证。</p>
<p><strong>5. Full Implementation</strong>
方案确认后，Agent 完整实现。中间会遇到 Agent 自己搞不定的 Case，比如 eBPF 的某些内核兼容性问题。这种 Case 我会切换到 Claude Sonnet 4.5，让它带着上下文直接 Debug，效率很高。</p>
<p>Git Worktree 是我的救星。Agent 在独立分支折腾，出了篓子不影响主分支。但数据库 Schema 变更是个痛点 —— Docker 跑的单机 PG 无法并发修改 Schema，只能串行。</p>
<p>另外，我对 Git 曾经有点不放心，害怕 Agent 误操作删除调教很久的代码。但随着 Agent 代码质量越来越高，这个心智负担越来越小。</p>
<h2 id="tool-selection">Tool Selection</h2>
<p>为什么最终回到 VS Code？因为我一直用 VS Code Remote 连接开发机。Claude Code 和 Codex 都在 VS Code 上有官方 Extension，还能输入图片（这个场景我经常遇到）。类似 Conductor 这类 Agent Orchestration 工具我就没怎么用上。</p>
<p>至于模型选择，我的经验：</p>
<table>
<thead>
<tr>
<th>维度</th>
<th>推荐</th>
</tr>
</thead>
<tbody>
<tr>
<td>审美</td>
<td>GPT-5.2-Codex &gt; Gemini-3 Pro &gt; Claude Opus 4.5 &raquo; GLM 4.7</td>
</tr>
<tr>
<td>Plan</td>
<td>Claude Opus 4.5 断档领先</td>
</tr>
<tr>
<td>Code</td>
<td>Claude Sonnet 4.5、GLM 4.7</td>
</tr>
<tr>
<td>Debug</td>
<td>Claude Opus/Sonnet 4.5、GLM 4.7</td>
</tr>
</tbody>
</table>
<p>多模型协同是趋势。不同模型擅长不同领域，组合使用效果最好。但订阅多个模型、跟踪每个模型的更新迭代、记住每个插件的用法 —— 也是真够累的。</p>
<p><img src="Xnip2026-02-04_15-32-13.jpg" alt="vscode" /></p>
<h2 id="thoughts">Thoughts</h2>
<p><strong>Fork 是刚需</strong></p>
<ul>
<li><strong>代码/文件级别</strong>：Git 解决了。</li>
<li><strong>运行环境级别</strong>：Docker/envd 解决了个人用户需求，但大规模 Agent 运行时的调度还没有完美方案。Unikernel 可能是个方向，但 Firecracker 这类技术还不够成熟。</li>
<li><strong>数据库级别</strong>：ACID 特性让 Fork 很困难，分布式数据库一旦 Fork 必然有数据冗余和一致性问题。PostgreSQL 这种单体数据库反而有优势。通过 PITR + JuiceFS Snapshot 可以实现 PG 的 Fork，工具如 <a href="https://piglet.run/docs/concept/snapshot/">piglet</a>。</li>
</ul>
<p><strong>多模型协同是未来</strong></p>
<p><strong>Skill Best Practice + MCP 是生产力放大器</strong></p>
<p><strong>Context/Memory 的演进和共享是核心战场</strong></p>
<p><strong>All in AI</strong></p>
<h2 id="next-step">Next Step</h2>
<ul>
<li>升级开发机配置</li>
<li>全自动化：DNS 配置、域名注册、Agent Notification</li>
<li>更好的 Global Context + Memory 管理方案</li>
<li>大规模 Agent 运行时 Infra 研究</li>
</ul>

  </div>

  <footer class="post-footer">
    <div class="post-footer-divider"></div>

    
    <div class="post-tags">
      
      <a href="https://blog.xieydd.top/tags/code-agent" class="tag">#Code Agent</a>
      
      <a href="https://blog.xieydd.top/tags/vs-code" class="tag">#VS Code</a>
      
      <a href="https://blog.xieydd.top/tags/claude-code" class="tag">#Claude Code</a>
      
      <a href="https://blog.xieydd.top/tags/opencode" class="tag">#OpenCode</a>
      
      <a href="https://blog.xieydd.top/tags/workflow" class="tag">#Workflow</a>
      
    </div>
    

    <div class="share-section">
      <span class="share-label">分享到:</span>
      <div class="share-buttons">
        <a href="https://x.com/intent/post?url=https%3a%2f%2fblog.xieydd.top%2fcode-agent-2026-02-02%2f" target="_blank" rel="noopener noreferrer" class="share-btn" title="Share on X">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4l11.733 16h4.267l-11.733 -16z" />
            <path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" />
          </svg>
        </a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fblog.xieydd.top%2fcode-agent-2026-02-02%2f" target="_blank" rel="noopener noreferrer" class="share-btn" title="Share on LinkedIn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 11v5" />
            <path d="M8 8v.01" />
            <path d="M12 16v-5" />
            <path d="M16 16v-3a2 2 0 1 0 -4 0" />
            <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
          </svg>
        </a>
        <a href="mailto:?subject=Coding%20at%20Agent-Speed&body=https%3a%2f%2fblog.xieydd.top%2fcode-agent-2026-02-02%2f" class="share-btn" title="Share via Email">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
            <path d="M3 7l9 6l9 -6" />
          </svg>
        </a>
      </div>
    </div>

    <a href="#" class="back-to-top">返回顶部</a>

    <div class="post-footer-divider"></div>

    <div class="post-nav">
      
      <a href="https://blog.xieydd.top/vector-search/" class="prev-post">
        <span class="nav-label">上一篇</span>
        <span class="nav-title">向量数据库中的门门道道</span>
      </a>
      
      
      <a href="https://blog.xieydd.top/kubernetes-topo-aware-all-you-need-know/" class="next-post">
        <span class="nav-label">下一篇</span>
        <span class="nav-title">关于 Kubernetes 中，拓扑感知你需要知道的一切</span>
      </a>
      
    </div>
  </footer>
</article>

    </main>
  </div>
  <script src="/js/code-copy.js"></script>
  <script src="https://unpkg.com/swup@4"></script>
  <script>
    (function() {
      function initThemeToggle() {
        var toggle = document.getElementById('theme-toggle');
        var html = document.documentElement;
        var stored = localStorage.getItem('theme');
        if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          html.classList.add('dark');
        }
        if (toggle) {
          toggle.addEventListener('click', function() {
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
          });
        }
      }

      function initReadingProgress() {
        var progress = document.getElementById('reading-progress');
        if (!progress) return;
        function updateProgress() {
          var scrollTop = window.scrollY || document.documentElement.scrollTop;
          var docHeight = document.documentElement.scrollHeight - window.innerHeight;
          var percent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
          progress.style.width = percent + '%';
        }
        window.removeEventListener('scroll', updateProgress);
        window.addEventListener('scroll', updateProgress);
        updateProgress();
      }

      function initBackToTop() {
        var backToTop = document.querySelector('.back-to-top');
        if (backToTop) {
          backToTop.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        }
      }

      initThemeToggle();
      initReadingProgress();
      initBackToTop();

      var swup = new Swup({
        animationSelector: '[class*="swup-transition-"]',
        containers: ['#swup', '.top-nav'],
        cache: true
      });

      swup.hooks.on('content:replace', function() {
        initThemeToggle();
        initReadingProgress();
        initBackToTop();
        
        document.querySelectorAll('.highlight').forEach(block => {
          if (!block.closest('.code-block-wrapper')) {
            const header = document.createElement('div');
            header.className = 'code-header';

            const controls = document.createElement('div');
            controls.className = 'window-controls';
            ['red', 'yellow', 'green'].forEach(color => {
              const dot = document.createElement('span');
              dot.className = 'window-dot ' + color;
              controls.appendChild(dot);
            });
            header.appendChild(controls);

            let langName = '';
            const code = block.querySelector('code[data-lang]');
            if (code) {
              langName = code.getAttribute('data-lang');
            } else {
              const codeClass = block.querySelector('code');
              if (codeClass) {
                const match = codeClass.className.match(/language-(\w+)/);
                if (match) langName = match[1];
              }
            }

            if (langName) {
              const langLabel = document.createElement('span');
              langLabel.className = 'lang-label';
              langLabel.textContent = langName;
              header.appendChild(langLabel);
            }

            const copyBtn = document.createElement('button');
            copyBtn.className = 'copy-btn';
            copyBtn.innerHTML = `
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              <span>Copy</span>
            `;

            copyBtn.addEventListener('click', async () => {
              let codeText = '';
              const table = block.querySelector('table');
              if (table) {
                const codeTd = table.querySelector('td:last-child');
                if (codeTd) codeText = codeTd.innerText;
              } else {
                codeText = block.querySelector('code').innerText;
              }

              try {
                await navigator.clipboard.writeText(codeText);
                copyBtn.innerHTML = `
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                  <span>Copied!</span>
                `;
                setTimeout(() => {
                  copyBtn.innerHTML = `
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                    <span>Copy</span>
                  `;
                }, 2000);
              } catch (err) {
                console.error('Failed to copy!', err);
              }
            });

            header.appendChild(copyBtn);

            const wrapper = document.createElement('div');
            wrapper.className = 'code-block-wrapper';

            block.parentNode.insertBefore(wrapper, block);
            wrapper.appendChild(header);
            wrapper.appendChild(block);
          }
        });
        window.scrollTo(0, 0);
      });
    })();
  </script>
</body>
</html>
